<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>أنا أتذكّر – صفحة 1</title>
  <style>
    .story-page {
      position: relative;
      max-width: 1000px; 
      margin: 20px auto;
      border: 1px solid #ccc;
    }
    .page-img {
      width: 100%;
      display: block;
    }
    .text-layer {
      position: absolute;
      inset: 0;
      direction: ltr; 
    }
    .word {
      position: absolute;
      cursor: pointer;
      color: transparent;
      background: transparent;
      border-radius: 4px;
    }
    .word.active {
      background: rgba(255, 235, 59, 0.45); 
      box-shadow: 0 0 5px rgba(255, 235, 59, 0.7);
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <div class="story-page">
    <img src="./page-01.png" class="page-img" alt="صفحة القصة">
    <div class="text-layer" id="textLayer"></div>
  </div>

  <div style="text-align:center; margin-top:20px;">
    <button onclick="playSequence()" style="padding: 12px 25px; font-size: 18px; cursor: pointer; background: #4CAF50; color: white; border: none; border-radius: 5px;">▶ تشغيل القراءة</button>
    <button onclick="clearHighlight()" style="padding: 12px 25px; font-size: 18px; cursor: pointer; background: #f44336; color: white; border: none; border-radius: 5px;">إيقاف</button>
  </div>

  <script>
    const wordsData = [
      // الصفحة اليمنى (الجزء الأول من النص)
      // المبدأ: كلما كانت الكلمة أقصى إلى اليمين، زادت قيمة left (نسبة مئوية)
      { text: "آتَذْكُرُ", top: 10, left: 85, width: 7, time: 0 },
      { text: "جَدِّي",    top: 10, left: 77, width: 6, time: 1000 },
      { text: "وَأَشْتَاقُ", top: 10, left: 64, width: 10, time: 2000 },
      { text: "إِلَيْهِ",   top: 10, left: 55, width: 6, time: 3000 },

      // الصفحة اليسرى (الجزء الثاني من النص)
      { text: "آتَذْكُرُ", top: 10, left: 40, width: 7, time: 4500 },
      { text: "وَجْهَهُ",   top: 10, left: 32, width: 6, time: 5500 },
      { text: "وَضِحْكَتَهُ", top: 10, left: 20, width: 10, time: 6500 },
      { text: "وَشَارِبَيْهِ", top: 10, left: 6, width: 11, time: 7500 }
    ];

    const layer = document.getElementById("textLayer");
    let wordEls = [];
    window.timeouts = [];

    wordsData.forEach(w => {
      const span = document.createElement("span");
      span.className = "word";
      span.style.top = w.top + "%";
      span.style.left = w.left + "%";
      span.style.width = w.width + "%";
      span.style.height = "8%"; // زدنا الارتفاع ليكون أكثر وضوحاً
      span.title = w.text; // إظهار النص عند التمرير
      layer.appendChild(span);
      wordEls.push(span);
    });

    // وظيفة إزالة التظليل
    function clearHighlight() {
      wordEls.forEach(w => w.classList.remove("active"));
      window.timeouts.forEach(t => clearTimeout(t));
      window.timeouts = [];
    }

    // وظيفة تشغيل التسلسل
    function playSequence() {
      clearHighlight();
      wordsData.forEach((word, index) => {
        const timeout = setTimeout(() => {
          wordEls.forEach(w => w.classList.remove("active"));
          wordEls[index].classList.add("active");
        }, word.time);
        window.timeouts.push(timeout);
      });
    }

    // تفعيل التظليل عند النقر يدوياً (اختياري)
    wordEls.forEach((el, index) => {
      el.addEventListener('click', () => {
        clearHighlight();
        el.classList.add('active');
        // توقف تلقائي بعد 2 ثانية
        setTimeout(() => {
          el.classList.remove('active');
        }, 2000);
      });
    });
  </script>
</body>
</html>
