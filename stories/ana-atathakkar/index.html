<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>أنا أتذكّر – صفحة 1</title>

  <!-- ربط الستايل العام -->
  <link rel="stylesheet" href="../../styles.css">

  <style>
    .story-page {
      position: relative;
      max-width: 900px;
      margin: 20px auto;
    }

    .page-img {
      width: 100%;
      display: block;
    }

    .text-layer {
      position: absolute;
      inset: 0;
      direction: rtl;
    }

    .word {
      position: absolute;
      padding: 4px 8px;
      border-radius: 6px;
      cursor: pointer;
      color: transparent;
      background: transparent;
    }

 .word.active {
background: rgba(255, 245, 200, 0.6);
  border-radius: 999px;
  padding: 4px 12px;
}


  </style>
</head>

<body>

  <div class="story-page">
    <img src="./page-01.png" class="page-img" alt="صفحة القصة">
    <div class="text-layer" id="textLayer"></div>
  </div>

  <div style="text-align:center; margin-top:10px;">
    <button onclick="playSequence()">▶ تشغيل القراءة</button>
    <button onclick="clearHighlight()">إلغاء التظليل</button>
  </div>

  <script>
    const words = [
      // السطر الأيمن
      { text: "أتذكّرُ", top: "7%", left: "90%", time: 0 },
      { text: "جدّي", top: "7%", left: "85%", time: 900 },
      { text: "وأشتاقُ", top: "7%", left: "80%", time: 1800 },
      { text: "إليه.", top: "7%", left: "75%", time: 2700 },

      // السطر الأيسر
      { text: "أتذكّرُ", top: "7%", left: "38%", time: 3800 },
      { text: "وجهَه،", top: "7%", left: "30%", time: 4700 },
      { text: "وضحكتَه،", top: "7%", left: "20%", time: 5600 },
      { text: "وشاربَيه.", top: "7%", left: "10%", time: 6500 }
    ];

    const layer = document.getElementById("textLayer");
    let wordEls = [];

    words.forEach(w => {
      const span = document.createElement("span");
      span.textContent = w.text;
      span.className = "word";
      span.style.top = w.top;
      span.style.left = w.left;

      // نحتفظ بالوقت
      span.dataset.time = w.time;

      // النقر اليدوي
      span.onclick = () => {
        clearHighlight();
        span.classList.add("active");
      };

      layer.appendChild(span);
      wordEls.push(span);
    });

    function clearHighlight() {
      wordEls.forEach(w => w.classList.remove("active"));
    }

    function playSequence() {
      clearHighlight();

      wordEls.forEach(word => {
        const t = parseInt(word.dataset.time, 10);

        setTimeout(() => {
          clearHighlight();
          word.classList.add("active");
        }, t);
      });
    }
  </script>

</body>
</html>
